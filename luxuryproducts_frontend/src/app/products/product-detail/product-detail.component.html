<div class="product-detail-container" *ngIf="product()">
    <div *ngFor="let name of variationNames()" class="variation-group">
        <span class="variation-label">{{ name }}:</span>
        <div class="variation-buttons">
            <button
                    *ngFor="let option of getFilteredOptions(name)"
                    (click)="onSelectValue(name, option)"
                    [class.selected]="selectedValues[name] === option"
                    type="button"
            >
                {{ option }}
            </button>
        </div>
    </div>

    <div class="product-display" *ngIf="selectedVariation && selectedVariation.stock > 0">
        <img [src]="selectedVariation.imageUrl" [alt]="selectedVariation.sku" class="product-image" />
        <div class="product-info">
            <p><strong>Prijs:</strong> €{{ selectedVariation.price }}</p>
            <p><strong>Voorraad:</strong> {{ selectedVariation.stock }} stuks</p>

            <p *ngIf="selectedVariation.stock <= 3 && selectedVariation.stock > 0" class="low-stock-warning">
                ⚠️ Bijna uitverkocht!
            </p>

            <button
                *ngIf="selectedVariation"
                (click)="cartService.addToCart(toSingleValueTuple(selectedVariation))">
                Add to cart
            </button>
        </div>
    </div>
</div>
